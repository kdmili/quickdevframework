<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>编辑</title>
</head>
<body>
<form method="post" enctype="multipart/form-data" action="" th:action="@{~/entity/edit_save/__${entityName}__}" class="form-horizontal">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal">
			<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
		</button>
		<h4 class="modal-title" id="myModalLabel">修改 [[${entityName}]] </h4>
	</div>
	<div class="modal-body">
		
			<div class="form-group" th:each="c : ${columns}"
				th:if="${!c.hidden &&  !c.persistype.toString().equals('MANY_TO_MANY')&& !c.persistype.toString().equals('ONE_TO_MANY')}"
				th:switch="${c.uiType==null?'Auto':c.uiType.ftype().toString()}">
				<label class="col-sm-2 control-label" th:text="${c.columnName}">title</label>
				<div class="col-sm-10"  th:object="${entity}" >
					<div th:case="Auto"  >
					<div th:if="${c.persistype.toString().equals('BASIC')}">
						<input  th:field="*{__${c.columnName}__}" th:if="${c.editAble}"  type="text" class="form-control"  />
						<input   th:field="*{__${c.columnName}__}" th:if="${not c.editAble}" readonly="readonly"  type="text" class="form-control"  />
					</div>
					 <div   th:if="${not c.persistype.toString().equals('BASIC')}" >
							<a data-toggle="modal" data-target="#modal_edit" href="" th:if="${c.editAble}"  th:href="@{~/entity/pick/__${c.javaType.getSimpleName()}__}" th:text="${c.getValue(entity)==null?c.javaType.getSimpleName():c.getValue(entity)}" >
							选择
							</a>
							<span th:if="${not c.editAble}"    th:text="${c.getValue(entity)}" >default entity value </span>
					 		<input type="hidden"  th:field="*{__${c.columnName}__.id}" />
					 </div> 	 
					</div>
					
					<div th:case="File" th:with=" name='$(\'[name='+${c.columnName}+']\')'">
						<a th:if="${not #strings.isEmpty(c.getValue(entity))}" th:href="@{~/__${c.getValue(entity)}__}">download</a> 
						<input type="file"    th:field="*{__${c.columnName}__}"/>
						<input type="hidden" th:name="${c.columnName}" th:value="${c.getValue(entity)}" />
						<a href="#" th:onclick="${ name+'.val('''')' }">删除</a>
					</div>
					
					<div th:case="Img" 	class="thumbnail" th:with=" name='$(\'[name='+${c.columnName}+']\')'">
						<img th:if="${not #strings.isEmpty(c.getValue(entity))}" src="" th:src="@{~/__${c.getValue(entity)}__}" />
						<input type="file"    th:field="*{__${c.columnName}__}" />
						<input type="hidden" th:name="${c.columnName}" th:value="${c.getValue(entity)}" />
						<a href="#" th:onclick="${ name+'.val('''')' }">删除</a>
					</div>
					
					<div th:case="Dictionary" >
						<select class="form-control"  th:field="*{__${c.columnName}__}" >
							<option th:each="o : ${dictionary.get(c.dictName)}" th:text="${o.value}" th:value="${o.key}">
						</select>
					</div>
					
					<div th:case="Cust" th:text="${c.uiType.readHtml()}" />
				</div>
			</div>
		
	</div>
	<div class="modal-footer">
	<button type="submit" class="btn btn-save" >保存</button>
	<button type="button" class="btn btn-cancel" data-dismiss="modal">取消</button>
	</div>
	</form>
</body>
</html>